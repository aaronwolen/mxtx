---
title: OpenMx Analysis
output: 
  html_document: 
    toc: yes
    toc_depth: 1
---


# Introduction

This report is designed to help explore the results of an OpenMx analysis.

```{r setup, include=FALSE}
library(knitr)
library(kableExtra)
library(polycor)
library(purrr)
library(rlang)
suppressPackageStartupMessages(library(OpenMx))

opts_chunk$set(echo = FALSE)
options(knitr.table.format = "html")

# mxtx report modules
.modules <- c(
  "model-summary.Rmd",
  "model-comparison.Rmd"
)

.modules <- system.file("modules", .modules, package = "mxtx", mustWork = TRUE)
```

```{r model-summaries, eval=TRUE, results='asis'}
# labels for chunk names and paths

src <- lapply(.models, reportModule)
# unlist(src)
# str(.models, max.level = 2)

# purrr::map(.models, isS4)
# lapply(.models, isS4)

# names(.models) <- make.names(map_chr(.models, "name"))

# select report module based on element length
# src <- imap(.models, ~ knit_expand(.modules[length(.x)], .label = .y))
```

`r unlist(src)`

## Free Parameters

This table shows a list of all the free parameters with their name, matrix element locators, parameter estimate and standard error, as well as lower and upper bounds if those were assigned. Note, `NA` is given for the name of elements that were not assigned a label. The columns **row** and **col** display the variables at the tail of the paths and the variables at the head of the paths, respectively.

```{r table-params}
model_summary <- summary(.models[[1]])
kable(model_summary$parameters)
```

## Goodness of Fit Statistics

This tables includes the number of observed statistics, the number of estimated parameters, the degrees of freedom, minus twice the log-likelihood of the data, the number of observations, the chi-square and associated p-value and several information criteria.

```{r table-gof}
kable(table_gof(model_summary))
```
